<div class="card settings mb-0">
  <div class="card-header">
    <h6>Settings</h6>
  </div>
  <div class="card-body pb-3">
    <div class="settings-link d-flex align-items-center flex-wrap">
      <a [routerLink]="routes.agentSettings"><i class="isax isax-user-octagon me-2"></i>Edit Profile</a>
      <a [routerLink]="routes.agentAccountSettings" class="active"><i class="isax isax-wallet-money me-2"></i>Supporting
        Documents</a>
      <!-- <a [routerLink]="routes.agentSecuritySettings"
        ><i class="isax isax-shield-tick me-2"></i>Security</a
      >
      <a [routerLink]="routes.agentPlansSettings"
        ><i class="isax isax-star me-2"></i>Plans & Billing</a
      > -->
    </div>

    <!-- Saved Variants -->
    <div class="card shadow-none" *ngIf="savedVariants?.length">
      <div class="card-header">
        <h5 class="fs-18">Uploaded Documents</h5>
      </div>
      <div class="card-body">
        <div *ngFor="let item of savedVariants; let variantIndex = index" class="card mb-3">
          <div class="card-header d-flex justify-content-between">
            <strong>{{
              item.form.value.name || "Variant " + (variantIndex + 1)
              }}</strong>
            <button class="btn btn-sm btn-outline-primary" (click)="item.expanded = !item.expanded">
              {{ item.expanded ? "Hide" : "Edit" }}
            </button>
          </div>

          <div class="card-body" *ngIf="item.expanded">
            <form [formGroup]="item.form">
              <div class="row">
                <div class="col-md-4 mb-3">
                  <label class="form-label">Name</label>
                  <input formControlName="name" type="text" class="form-control" />
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Expiry Date</label>
                  <input formControlName="date" type="date" class="form-control" />
                </div>


              </div>

              <div class="row">

                <div class="col-md-4 mb-3">
                  <label class="form-label d-block">Document Preview</label>

                  <a *ngIf="item.form.value.img" [href]="item.form.value.img" download target="_blank"
                    class="d-inline-block text-decoration-none">
                    <img *ngIf="!isPdf(item.form.value.img)" [src]="item.form.value.img" alt="Document"
                      style="width: 100px; border-radius: 4px;" />
                    <i *ngIf="isPdf(item.form.value.img)" class="isax isax-document-text fs-32 text-danger"
                      title="Download PDF"></i>
                    <span class="d-block mt-1 text-primary" style="font-size: 12px;">Download</span>
                  </a>
                </div>


              </div>
              <button class="btn btn-success btn-sm" type="button" (click)="updateDocument(item)">
                Update Document
              </button>

            </form>
          </div>
        </div>
      </div>
    </div>

    <form [formGroup]="addVariantForm" (ngSubmit)="addVariant()">
      <div class="card shadow-none">
        <div class="card-header">
          <h5 class="fs-18">Add Supporting Documents</h5>
          <blockquote style="color: red">
            <i class="isax isax-quote-up5 me-2" style="font-size: 24px;"></i>Accepted documents for adding a Service
            include the Aadhaar card, RC book, pollution certificate, and any other valid documents. Please contact the
            admin or submit documents as preferred or approved by the admin.
          </blockquote>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-lg-4 col-md-6 mb-3">
              <label class="form-label">Document Name</label>
              <input type="text" class="form-control" formControlName="name" placeholder="Document name" />
            </div>

            <div class="col-lg-4 col-md-6 mb-3">
              <label class="form-label">Expiry Date</label>
              <input type="date" class="form-control" formControlName="date" />
            </div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="form-group">
                <label for="thumbnailInput" class="form-label">Choose Document</label>
                <div class="d-flex align-items-center">
                  <input type="file" class="form-control w-auto" id="thumbnailInput" accept="image/*,.pdf"
                    (change)="onThumbnailSelected($event)" />

                  <div class="ms-3" *ngIf="thumbnailPreviewUrl || isPdfFile">
                    <!-- Image preview -->
                    <img *ngIf="!isPdfFile" [src]="thumbnailPreviewUrl" alt="Preview"
                      style="width: 80px; height: auto; border-radius: 4px" />

                    <!-- PDF icon preview -->
                    <i *ngIf="isPdfFile" class="isax isax-folder-open fs-32 text-danger" title="PDF File"></i>

                    <button type="button" class="btn btn-sm btn-outline-danger ms-2" (click)="removeThumbnail()">
                      <i class="isax isax-trash"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="d-flex justify-content-end mt-3">
            <button type="submit" class="btn btn-primary">Add Document</button>
          </div>
        </div>
      </div>
    </form>
    <!-- /Settings Content-->
  </div>
</div>