<!-- Delete Modal -->
<div class="modal fade" id="delete-list" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-sm">
    <div class="modal-content">
      <div class="modal-body">
        <div class="text-center">
          <h5 class="mb-3">Delete Listing</h5>
          <p class="mb-3">Are you sure you want to delete this listing?</p>
          <div class="d-flex align-items-center justify-content-center">
            <a href="javascript:void(0);" class="btn btn-light me-2">No</a>
            <a href="javascript:void(0);" data-bs-dismiss="modal" class="btn btn-primary">Yes, Delete</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--  Delete Modal -->
<div id="captureSection">

  <!-- Breadcrumb -->
  <div class="breadcrumb-bar  text-center" *ngIf="!pdfHead">
    <div class="container">
      <div class="row">
        <div class="col-md-12 col-12">

          <h2 class="breadcrumb-title mb-2">Add / Edit Service</h2>


          <button class="btn btn-primary mt-2 mb-3" [routerLink]="routes.agentListings">
            <i class="isax isax-arrow-left"></i> Back to Services
          </button>



        </div>
      </div>
    </div>
  </div>



  <div class="breadcrumb-bar text-center" *ngIf="pdfHead">
    <div class="container">
      <div class="row">
        <div class="col-md-12 col-12">


          <img src="assets/img/pdf_head.jpeg" alt="PDF Header" class="img-fluid"
            style="max-width: 100%; height: auto;" />




        </div>
      </div>
    </div>
  </div>
  <!-- /Breadcrumb -->

  <!-- Page Wrapper -->
  <div class="content">
    <div class="container">
      <div class="row">
        <!-- Sidebar -->
        <div class="col-lg-3">
          <div class="card border-0 mb-4 mb-lg-0 theiaStickySidebar">
            <div class="card-body">
              <div>
                <h5 class="mb-3">Services</h5>
                <ul class="add-tab-list">
                  <li *ngFor="let tab of tabs">
                    <a href="javascript:void(0);" [class.active]="activeTab === tab.id" (click)="scrollTo(tab.id)">
                      {{ tab.label }}
                    </a>
                  </li>
                </ul>
              </div>

              <button class="btn btn-primary mt-5" (click)="downloadPdf()" [disabled]="isLoading">
                <span *ngIf="!isLoading">Download as PDF</span>
                <span *ngIf="isLoading">
                  <i class="spinner-border spinner-border-sm me-2"></i> Downloading...
                </span>
              </button>
            </div>
          </div>
        </div>
        <!-- /Sidebar -->

        <!-- edit service -->
        <div class="col-lg-9">
          <form [formGroup]="editServiceInfo" #validate1="ngForm" (ngSubmit)="editServiceInformation()">





            <div class="d-flex align-items-center justify-content-between flex-wrap row-gap-3">
              <div class="place-nav listing-nav">
                <ul class="nav mb-2">
                  <li class="me-2" *ngFor="let tab of mainServiceOptions" [class.disabled]="!createMode"
                    (click)="createMode && onTabClick(tab.value)">
                    <a href="javascript:void(0);" class="nav-link" [class.active]="selectedType === tab.value">
                      {{ tab.label }}
                    </a>
                  </li>
                </ul>
              </div>
            </div>




            <!-- Service Info -->
            <div class="card shadow-none" id="service_info">
              <div class="card-header">
                <div class="d-flex align-items-center justify-content-between">
                  <h6 class="fs-18">Service Info</h6>
                </div>
              </div>
              <div class="card-body pb-1">
                <div class="row">
                  <!-- <div class="col-xl-6 col-md-6">
                  <div class="mb-6">
                    <label class="form-label">Main Service</label>
                    <mat-select class="custom-mat-select select" placeholder="Select"
                      (selectionChange)="onCategoryChange($event.value)" formControlName="propertyType">
                      <mat-option *ngFor="let option of mainServiceOptions" [value]="option.value">
                        {{ option.label }}
                      </mat-option>
                    </mat-select>
                  </div>
                </div> -->

                  <div class="col-xl-6 col-md-6">
                    <div class="mb-3">
                      <label class="form-label">Category</label>
                      <mat-select class="custom-mat-select select" placeholder="Select" formControlName="category">
                        <mat-option value="" disabled selected>Select category</mat-option>
                        <mat-option *ngFor="let cat of category" [value]="cat.id">
                          {{ cat.name }}
                        </mat-option>
                      </mat-select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- /Service Info -->

            <!-- Gallery -->
            <div class="card shadow-none" id="thumbnail">
              <div class="card-header">
                <h5 class="fs-18">Image</h5>
              </div>
              <div class="card-body">
                <div class="form-group">
                  <label for="thumbnailInput" class="form-label">Choose Image</label>
                  <div class="d-flex align-items-center">
                    <input type="file" class="form-control w-auto" id="thumbnailInput" accept="image/*"
                      (change)="onThumbnailSelected($event)" />
                    <div class="ms-3" *ngIf="properties?.image && !thumbnailPreviewUrl">

                      <img [src]="properties?.image" alt="Preview"
                        style="width: 80px; height: auto; border-radius: 4px" />
                    </div>

                    <div class="ms-3" *ngIf="thumbnailPreviewUrl">
                      <img [src]="thumbnailPreviewUrl" alt="Preview"
                        style="width: 80px; height: auto; border-radius: 4px" />

                      <button class="btn btn-sm btn-outline-danger ms-2" (click)="removeThumbnail()">
                        <i class="isax isax-trash"></i>
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Preview -->
              </div>
            </div>

            <!-- /Gallery -->

            <!-- Basic Info -->
            <div class="card shadow-none" id="basic_info">
              <div class="card-header">
                <div class="d-flex align-items-center justify-content-between">
                  <h6 class="fs-18">Basic Info</h6>
                </div>
              </div>

              <div class="card-body pb-1">
                <div class="row">
                  <div class="col-lg-4 col-md-6">
                    <div class="mb-3">
                      <label class="form-label">OTA Name</label>
                      <input type="text" class="form-control" formControlName="name" />
                    </div>
                  </div>
                  <!-- <div class="col-lg-4 col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Details</label>
                    <input type="text" class="form-control" formControlName="description" />
                  </div>
                </div> -->

                  <div class="col-lg-4 col-md-6">
                    <div class="mb-3">
                      <label class="form-label">Trade Name</label>
                      <input type="text" class="form-control" formControlName="trade_name" />
                      <!-- <div *ngIf="addServiceInfo.get('trade_name')?.touched && addServiceInfo.get('trade_name')?.invalid"
                        class="text-danger mt-1 fs-13">
                        Trade Name is required.
                      </div> -->
                    </div>
                  </div>



                  <div class="col-lg-4 col-md-6" *ngIf="propertyType == 'BACK_WATERS'">
                    <div class="mb-3">
                      <label class="form-label">Boat Type</label>
                      <mat-select class="custom-mat-select select" placeholder="Select" formControlName="boat_type">
                        <mat-option value="OTHER">OTHER</mat-option>
                        <mat-option value="STANDARD">STANDARD</mat-option>
                        <mat-option value="DELUXE">DELUXE</mat-option>
                        <mat-option value="PREMIUM">PREMIUM</mat-option>
                        <mat-option value="LUXURY">LUXURY</mat-option>
                      </mat-select>
                    </div>
                  </div>


                  <div class="col-lg-4 col-md-6">
                    <div class="mb-3">
                      <label class="form-label">Place</label>
                      <input type="text" class="form-control" formControlName="place" />
                    </div>
                  </div>

                  <div class="col-lg-4 col-md-6">
                    <div class="mb-3">
                      <label class="form-label">District</label>
                      <input type="text" class="form-control" formControlName="district" />
                    </div>
                  </div>

                  <div class="col-lg-4 col-md-6">
                    <div class="mb-3">
                      <label class="form-label">State</label>
                      <input type="text" class="form-control" formControlName="state" />
                    </div>
                  </div>

                  <div class="col-lg-4 col-md-6">
                    <div class="mb-3">
                      <label class="form-label">Pin code</label>
                      <input type="text" class="form-control" formControlName="pincode" />
                    </div>
                  </div>








                  <!-- <div class="col-lg-4 col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Latitude</label>
                    <input type="text" class="form-control" formControlName="latitude" />
                  </div>
                </div>

                <div class="col-lg-4 col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Longitude</label>
                    <input type="text" class="form-control" formControlName="longitude" />
                  </div>
                </div> -->

                  <div class="col-lg-4 col-md-6">
                    <div class="mb-3">
                      <label class="form-label" *ngIf="propertyType != 'SPECIAL_EVENTS'">Details</label>
                      <label class="form-label" *ngIf="propertyType == 'SPECIAL_EVENTS'">About The Show</label>

                      <!-- <input type="text" class="form-control" formControlName="description" /> -->

                      <textarea class="form-control" rows="2" formControlName="description"
                        placeholder="Enter details here"></textarea>
                      <!-- <div *ngIf="addServiceInfo.get('description')?.touched && addServiceInfo.get('description')?.invalid"
                        class="text-danger mt-1 fs-13">
                        Details is required.
                      </div> -->
                    </div>
                  </div>







                  <div class="col-lg-4 col-md-6"
                    *ngIf="propertyType == 'ACCOMODATION' || propertyType == 'BACK_WATERS'">
                    <label class="form-label">Nearby Attraction</label>
                    <textarea class="form-control" rows="2" formControlName="nearby_attractions"
                      placeholder="eg :- Museum,Bird Sanctuary"></textarea>
                  </div>
                  <div class="col-lg-4 col-md-6"
                    *ngIf="propertyType == 'ACCOMODATION' ||  propertyType == 'BACK_WATERS'">
                    <label class="form-label">Distances </label>
                    <textarea class="form-control" rows="2" formControlName="distances"
                      placeholder="eg :- Airport - 10km , Railway Station - 20km "></textarea>
                  </div>

                  <div class="mb-3 mt-3">
                    <div class="mb-2"> <input id="searchBox" type="text" class="form-control"
                        placeholder="Search location..." />
                    </div>
                    <div id="map" style="height: 250px; width: 100%"></div>

                  </div>


                  <div class="col-lg-12 col-md-6 mt-3">
                    <label class="form-label">Terms And Conditions</label>

                    <quill-editor formControlName="termsAndConditions" theme="snow"
                      [style]="{height: '200px'}"></quill-editor>
                  </div>



                </div>
              </div>


              <div class="d-flex align-items-center justify-content-center mb-2 mt-3">
                <button type="submit" class="btn btn-primary">
                  <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-1" role="status"
                    aria-hidden="true"></span>
                  {{ createMode ? 'Save' : 'Edit' }}
                </button>
              </div>


            </div>
            <!-- /Basic Info -->




          </form>

          <!-- variant  -->
          <div class="col-lg-12 mt-3" *ngIf="propertyId" id="variant">
            <!-- Saved Variants -->
            <div class="card shadow-none" *ngIf="savedVariants?.length">
              <div class="card-header">
                <h5 class="fs-18">Saved Property Types</h5>
              </div>
              <div class="card-body">
                <div *ngFor="let item of savedVariants; let variantIndex = index" class="card mb-3">
                  <!-- <div class="card-header d-flex justify-content-between" >
                  <strong>{{
                    item.form.value.name || "Variant " + (variantIndex + 1)
                    }}</strong>
                  <button class="btn btn-sm btn-outline-primary" (click)="item.expanded = !item.expanded">
                    {{ item.expanded ? "Hide" : "Open" }}
                  </button>
                </div> -->

                  <div
                    class="card-header d-flex justify-content-between align-items-center py-3 px-4 rounded shadow-sm bg-white">
                    <div class="d-flex align-items-center gap-3">
                      <img *ngIf="item.form.value.variantImg" [src]="item.form.value.variantImg" alt="Variant Image"
                        class="variant-img" />
                      <strong>{{
                        item.form.value.name || "Variant " + (variantIndex + 1)
                        }}</strong>
                    </div>

                    <button class="btn btn-sm btn-outline-primary" (click)="item.expanded = !item.expanded">
                      {{ item.expanded ? "Hide" : "Open" }}
                    </button>
                  </div>


                  <div class="card-body" *ngIf="item.expanded">

                    <div class="col-lg-12 mt-3" *ngIf="item?.propertyImgs?.length">
                      <div class="card shadow-none">
                        <div class="card-header d-flex justify-content-between align-items-center">
                          <h5 class="fs-18 mb-0">Uploaded Images</h5>
                          <button class="btn btn-sm btn-outline-secondary"
                            (click)="imageGalleryExpanded = !imageGalleryExpanded">
                            {{ imageGalleryExpanded ? "Hide" : "Show" }} Gallery
                          </button>
                        </div>

                        <div class="card-body" *ngIf="imageGalleryExpanded">
                          <div class="row">
                            <div class="col-md-3 mb-3" *ngFor="let image of item.propertyImgs">
                              <div class="position-relative image-wrapper">
                                <img [src]="image.img_url" class="img-fluid rounded" alt="Service Image"
                                  style="width: 100%; height: 180px; object-fit: cover" />
                                <!-- Delete button on hover -->
                                <!-- <button
              type="button"
              class="btn btn-sm btn-danger position-absolute top-0 end-0 m-2 delete-btn"
              (click)="deleteImage(image.id)"
              title="Delete Image"
            >
              <i class="isax isax-trash"></i>
            </button> -->
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Gallery -->
                    <div class="card shadow-none" id="thumbnail">
                      <div class="card-header">
                        <h5 class="fs-18">Image Of Property Type</h5>
                      </div>
                      <div class="card-body">
                        <div class="form-group">
                          <label for="thumbnailInput" class="form-label">Choose Image</label>
                        </div>
                        <div class="d-flex align-items-center w-100">
                          <!-- File input -->
                          <input type="file" class="form-control w-auto" id="thumbnailInput" accept="image/*"
                            (change)="onPropertImgSelected($event)" />

                          <!-- Image preview + remove -->
                          <div class="ms-3 d-flex align-items-center" *ngIf="propertyPreviewUrl">
                            <img [src]="propertyPreviewUrl" alt="Preview"
                              style="width: 80px; height: auto; border-radius: 4px" />
                            <button class="btn btn-sm btn-outline-danger ms-2" (click)="removePropertyImg()">
                              <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-1" role="status"
                                aria-hidden="true"></span>
                              <i class="isax isax-trash"></i>
                            </button>
                          </div>

                          <!-- Add button aligned to right -->
                          <div class="ms-2">
                            <button type="button" class="btn btn-danger" (click)="createPropertyImg(item.id)">

                              <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-1" role="status"
                                aria-hidden="true"></span>
                              Add Image
                            </button>
                          </div>
                        </div>

                        <!-- Preview -->
                      </div>
                    </div>

                    <!-- /Gallery -->
                    <form [formGroup]="item.form">
                      <div class="row">
                        <div class="col-md-4 mb-3">
                          <label class="form-label">Name</label>
                          <input formControlName="name" type="text" class="form-control" />
                        </div>

                        <div class="col-lg-4 col-md-6">
                          <label class="form-label">Details</label>
                          <input type="text" class="form-control" formControlName="details" />
                        </div>


                        <div class="col-lg-4 col-md-6">
                          <label class="form-label">No of Units Available</label>
                          <input type="text" class="form-control" formControlName="total_units_available" />
                        </div>


                        <div class="col-md-4 mb-3" *ngIf="propertyType == '!TRANSPORTATION'">
                          <label class="form-label">Child Count</label>
                          <input formControlName="child_count" type="number" class="form-control" />
                        </div>

                        <div class="col-md-4 mb-3" *ngIf="propertyType == '!TRANSPORTATION'">
                          <label class="form-label"> Standard
                            Rate
                          </label>
                          <input formControlName="rate" type="number" class="form-control" />
                        </div>












                        <div class="card-body pb-1" *ngIf="propertyType == 'BACK_WATERS'">
                          <div class="row">
                            <div class="col-lg-4 col-md-6">
                              <div class="mb-3">
                                <label class="form-label"> Number of Capacity </label>
                                <input type="text" class="form-control" formControlName="capacity" />
                              </div>
                            </div>
                            <div class="col-lg-4 col-md-6">
                              <div class="mb-3">
                                <label class="form-label">Number of Staff</label>
                                <input type="text" class="form-control" formControlName="staff" />
                              </div>
                            </div>

                            <div class="col-lg-4 col-md-6">
                              <div class="mb-3">
                                <label class="form-label"> Boat Material</label>
                                <input type="text" class="form-control" formControlName="boat_material" />
                              </div>
                            </div>




                          </div>
                        </div>


                        <div class="card-body pb-1" *ngIf="propertyType === 'TRANSPORTATION'">
                          <div class="row">

                            <!-- 3. Capacity -->
                            <div class="col-lg-4 col-md-6 mb-3">
                              <label class="form-label">Capacity</label>
                              <input type="text" class="form-control" formControlName="capacity_transport" />
                            </div>

                            <!-- 4. Vehicle Number -->
                            <div class="col-lg-4 col-md-6 mb-3">
                              <label class="form-label">Vehicle Number</label>
                              <input type="text" class="form-control" formControlName="vehicle_number" />
                            </div>





                            <!-- 5. RC Number with Expiry -->
                            <div class="col-lg-12 col-md-12 mb-3">
                              <div class="row">
                                <div class="col-md-6">
                                  <label class="form-label">Commercial Permit Number</label>
                                  <input type="text" class="form-control" formControlName="permit_number" />
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label">Commercial Permit Expiry</label>
                                  <input type="date" class="form-control" formControlName="permit_expiry" />
                                </div>
                              </div>
                            </div>

                            <!-- 5. RC Number with Expiry -->
                            <div class="col-lg-12 col-md-12 mb-3">
                              <div class="row">
                                <div class="col-md-6">
                                  <label class="form-label">Fitness Certificate Number</label>
                                  <input type="text" class="form-control" formControlName="fitness_number" />
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label">Fitness Certificate Expiry</label>
                                  <input type="date" class="form-control" formControlName="fitness_expiry" />
                                </div>

                              </div>
                            </div>







                            <!-- 5. RC Number with Expiry -->
                            <div class="col-lg-12 col-md-12 mb-3">
                              <div class="row">
                                <div class="col-md-6">
                                  <label class="form-label">RC Number</label>
                                  <input type="text" class="form-control" formControlName="rc_number" />
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label">RC Expiry</label>
                                  <input type="date" class="form-control" formControlName="rc_expiry" />
                                </div>
                              </div>
                            </div>

                            <!-- 6. PUC with Expiry -->
                            <div class="col-lg-12 col-md-12 mb-3">
                              <div class="row">
                                <div class="col-md-6">
                                  <label class="form-label">PUC Number</label>
                                  <input type="text" class="form-control" formControlName="puc_number" />
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label">PUC Expiry</label>
                                  <input type="date" class="form-control" formControlName="puc_expiry" />
                                </div>
                              </div>
                            </div>



                            <!-- 8. Insurance Number with Expiry -->
                            <div class="col-lg-12 col-md-12 mb-3">
                              <div class="row">
                                <div class="col-md-6">
                                  <label class="form-label">Insurance Number</label>
                                  <input type="text" class="form-control" formControlName="insurance_number" />
                                </div>
                                <div class="col-md-6">
                                  <label class="form-label">Insurance Expiry</label>
                                  <input type="date" class="form-control" formControlName="insurance_expiry" />
                                </div>
                              </div>
                            </div>


                          </div>


                        </div>

                        <div class="card-body pb-1" *ngIf="propertyType == 'SPECIAL_EVENTS'">
                          <div class="row">
                            <!-- Number of Guests -->
                            <div class="col-lg-4 col-md-6">
                              <div class="mb-3">
                                <label class="form-label"> Number of Capacity </label>
                                <input type="text" class="form-control" formControlName="capacity" />
                              </div>
                            </div>

                            <!-- Price -->
                            <div class="col-lg-4 col-md-6">
                              <div class="mb-3">
                                <label class="form-label">Date</label>
                                <input type="date" class="form-control" formControlName="event_date" />
                              </div>
                            </div>


                            <div class="col-lg-4 col-md-6">
                              <div class="mb-3">
                                <label class="form-label">Time</label>
                                <input type="time" class="form-control" formControlName="event_time" />
                              </div>
                            </div>








                          </div>
                        </div>

                        <div class="col-lg-4 col-md-6"
                          *ngIf="propertyType !== 'ACCOMODATION' && propertyType !== 'SPECIAL_EVENTS'">
                          <label class="form-label">Emergency Contact Number</label>
                          <input type="text" class="form-control" formControlName="emergency_number" />
                        </div>




                        <!-- Extra Fields -->
                        <div *ngIf="getExtraFields(item.form).length" class="mt-3 mb-3">
                          <h6 class="fw-semibold mb-2">Extra Fields:</h6>
                          <div class="d-flex flex-wrap gap-2">
                            <div *ngFor="let c of getExtraFields(item.form); let i = index"
                              class="d-flex align-items-center bg-light px-2 py-1 rounded">
                              <strong class="me-2">{{ c.value.key }}:</strong> {{ c.value.value }}
                              <button type="button"
                                class="btn btn-sm btn-danger d-flex align-items-center justify-content-center p-1 ms-2"
                                (click)="removeExtraField(item.form, i)"
                                style="width: 26px; height: 26px; border-radius: 50%;">
                                <i class="isax isax-trash fs-14"></i>
                              </button>
                            </div>
                          </div>
                        </div>




                        <!-- Amentities -->
                        <div *ngIf="getCustomizations(item.form).length" class="mt-2 mb-3">
                          <h6 class="fw-semibold mb-2">Amenities:</h6>
                          <div class="d-flex flex-wrap gap-2">
                            <div *ngFor="let c of getCustomizations(item.form); let i = index"
                              class="d-flex align-items-center bg-light px-2 py-1 rounded">
                              <strong class="me-2">{{ c.value.key }}</strong>
                              <button type="button"
                                class="btn btn-sm btn-danger d-flex align-items-center justify-content-center p-1"
                                (click)="removeCustomizationView(item.form, i)"
                                style="width: 26px; height: 26px; border-radius: 50%;">
                                <i class="isax isax-trash fs-14"></i>
                              </button>
                            </div>
                          </div>
                        </div>





                        <div class="d-flex align-items-center justify-content-between mt-3">
                          <h5 class="fs-18">Add More Fields</h5>
                        </div>

                        <form [formGroup]="addExtraFieldForm" class="row align-items-end mb-2 ">

                          <div class="col-md-3">
                            <label class="form-label">Extra Field Name</label>
                            <mat-select class="custom-mat-select select" placeholder="Select Option"
                              formControlName="key">
                              <mat-option *ngFor="let option of customizedData" [value]="option.name">
                                {{ option.name }}
                              </mat-option>
                            </mat-select>
                          </div>
                          <div class="col-md-3">
                            <label class="form-label">Value</label>
                            <input type="text" class="form-control" formControlName="value" />
                          </div>
                          <div class="col-md-2 d-flex align-items-end">
                            <button type="button" class="btn btn-success btn-sm" (click)="addNewExtraField(item.form)">
                              <i class="isax isax-add-circle me-1"></i> Add
                            </button>
                          </div>
                        </form>


                        <div class="card shadow-none mb-3 mt-3">
                          <div class="card-header">
                            <div class="d-flex align-items-center justify-content-between">
                              <h5 class="fs-18">Add More Amentities</h5>
                            </div>
                          </div>

                          <div class="card-body pb-1" formArrayName="customizationBlocksUpdate">
                            <!-- Repeatable Group Blocks -->
                            <div *ngFor="let block of customizationBlocksUpdate.controls; let i = index"
                              [formGroupName]="i" class="mb-4">
                              <!-- Group Dropdown -->
                              <div class="row">
                                <div class="col-lg-2 col-md-3 mb-3">
                                  <!-- check readonly -->
                                  <mat-select class="custom-mat-select select" placeholder="Select Group"
                                    formControlName="mainOptions" [disabled]="readOnlyBlocks[i]"
                                    (selectionChange)="onGroupChange($event.value, i)">
                                    <mat-option value="">Select</mat-option>
                                    <mat-option *ngFor="let option of groupOptions" [value]="option.value">
                                      {{ option.label }}
                                    </mat-option>
                                  </mat-select>
                                </div>
                              </div>

                              <!-- Checkbox Grid -->
                              <div class="row">
                                <div class="col-lg-12 col-md-6">
                                  <div class="mb-3">
                                    <div class="row">
                                      <div class="col-lg-4 col-md-6 mb-2"
                                        *ngFor="let option of customizedDataArray[i]; let idx = index">
                                        <div class="form-check d-flex align-items-center ps-0">
                                          <!-- <input class="form-check-input ms-0 mt-0" type="checkbox"
                                    [id]="'custom-opt-' + i + '-' + idx"
                                    (change)="onCheckboxChange($event, option, i)" /> -->
                                          <input class="form-check-input ms-0 mt-0" type="checkbox"
                                            [disabled]="readOnlyBlocks[i]" [id]="'custom-opt-' + i + '-' + idx"
                                            (change)="onCheckboxChangeUpdate(item.form,$event, option, i)" />
                                          <label class="form-check-label ms-2" [for]="'custom-opt-' + i + '-' + idx">
                                            <img *ngIf="option.icon_url" [src]="option.icon_url" width="20" height="20"
                                              class="me-2" />
                                            {{ option.name }}
                                          </label>
                                        </div>
                                      </div>
                                    </div>
                                  </div>



                                  <!-- Add Button -->
                                  <div class="col-lg-3 col-md-3 d-flex align-items-end mt-2"
                                    *ngIf="i === customizationBlocksUpdate.length - 1">
                                    <button type="button" class="btn btn-success btn-sm" (click)="onAddUpdate(i)">
                                      <i class="isax isax-add-circle me-1"></i> Add More
                                    </button>
                                  </div>




                                </div>
                              </div>
                            </div>

                          </div>
                        </div>

                        <!-- <div *ngFor="let variant of savedVariants; let vi = index" [formGroup]="item.form"> -->

                        <div [formGroup]="item.form">




                          <!-- Add New Pricing Form -->
                          <div class="card shadow-none mt-3">
                            <div class="card-header">
                              <h5 class="fs-18">Add Pricing</h5>
                            </div>

                            <div class="row card-body pb-1" *ngIf="propertyType == 'BACK_WATERS'">
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Standard
                                  Rate

                                </label>
                                <input formControlName="rate" type="number" class="form-control" />
                              </div>

                              <div class="col-lg-4 col-md-6">
                                <label class="form-label">Extra Hour Rate</label>
                                <input type="text" class="form-control" formControlName="extra_hour_rate"
                                  placeholder="" />
                              </div>


                              <div class="col-lg-4 col-md-6">
                                <label class="form-label">Extra Person Rate</label>
                                <input type="text" class="form-control" formControlName="extra_person_rate"
                                  placeholder="" />
                              </div>
                              <div class="col-lg-4 col-md-6">
                                <label class="form-label">Breakfast Rate</label>
                                <input type="text" class="form-control" formControlName="breakfast_rate"
                                  placeholder="type amount or free" />
                              </div>
                              <div class="col-lg-4 col-md-6">
                                <label class="form-label">Lunch Rate</label>
                                <input type="text" class="form-control" formControlName="lunch_rate"
                                  placeholder="type amount or free" />
                              </div>
                              <div class="col-lg-4 col-md-6">
                                <label class="form-label">Dinner Rate</label>
                                <input type="text" class="form-control" formControlName="dinner_rate"
                                  placeholder="type amount or free" />
                              </div>

                              <div class="col-lg-4 col-md-6 mt-2">
                                <label class="form-label">Extra Bed Rate</label>
                                <input type="number" class="form-control" formControlName="rate_for_extra_bed"
                                  placeholder="Extra Bed rate" />
                              </div>


                            </div>

                            <div class="row card-body pb-1" *ngIf="propertyType == 'TRANSPORTATION'">

                              <div class="col-md-4 mb-3">
                                <label class="form-label"> Minimum Rate

                                </label>
                                <input formControlName="rate" type="number" class="form-control" />
                              </div>





                              <div class="col-lg-4 col-md-6" *ngIf="propertyType == 'TRANSPORTATION'">
                                <label class="form-label">KM for Minimum Rate</label>
                                <input type="text" class="form-control" formControlName="km_min_rate"
                                  placeholder="Kilometer for minimum rate" />
                              </div>

                              <div class="col-lg-4 col-md-6" *ngIf="propertyType == 'TRANSPORTATION'">
                                <label class="form-label">Addition Rate / KM</label>
                                <input type="text" class="form-control" formControlName="additional_rate_km" />
                              </div>

                              <div class="col-lg-4 col-md-6" *ngIf="propertyType == 'TRANSPORTATION'">
                                <label class="form-label">Waiting Charge</label>
                                <input type="text" class="form-control" formControlName="waiting_rate" />
                              </div>

                              <!-- ONE - DAY -->
                              <div class="col-12 mb-4 mt-3">
                                <label class="form-label fw-bold">ONE - DAY</label>
                                <div class="row">

                                  <!-- Minimum Rate Group -->
                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Minimum Rate (₹)</label>
                                    <input type="text" class="form-control" formControlName="one_day_min_rate">
                                  </div>
                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Included KM</label>
                                    <input type="text" class="form-control" formControlName="one_day_included_km">
                                  </div>
                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Included Hours</label>
                                    <input type="text" class="form-control" formControlName="one_day_included_hours">
                                  </div>

                                  <!-- Additional Charges -->
                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Rate per Additional KM</label>
                                    <input type="text" class="form-control" formControlName="one_day_add_km">
                                  </div>
                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Rate per Additional Hour</label>
                                    <input type="text" class="form-control" formControlName="one_day_add_hr">
                                  </div>
                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Driver Bata</label>
                                    <input type="text" class="form-control" formControlName="one_day_bata">
                                  </div>

                                </div>
                              </div>

                              <!-- TWO - DAYS -->
                              <div class="col-12 mb-4">
                                <label class="form-label fw-bold">TWO - DAYS</label>
                                <div class="row">

                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Minimum Rate (₹)</label>
                                    <input type="text" class="form-control" formControlName="two_day_min_rate">
                                  </div>
                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Included KM</label>
                                    <input type="text" class="form-control" formControlName="two_day_included_km">
                                  </div>
                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Included Hours</label>
                                    <input type="text" class="form-control" formControlName="two_day_included_hours">
                                  </div>

                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Rate per Additional KM</label>
                                    <input type="text" class="form-control" formControlName="two_day_add_km">
                                  </div>
                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Rate per Additional Hour</label>
                                    <input type="text" class="form-control" formControlName="two_day_add_hr">
                                  </div>
                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Driver Bata</label>
                                    <input type="text" class="form-control" formControlName="two_day_bata">
                                  </div>

                                </div>
                              </div>

                              <!-- THREE - DAYS -->
                              <div class="col-12 mb-4">
                                <label class="form-label fw-bold">THREE - DAYS</label>
                                <div class="row">

                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Minimum Rate (₹)</label>
                                    <input type="text" class="form-control" formControlName="three_day_min_rate">
                                  </div>
                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Included KM</label>
                                    <input type="text" class="form-control" formControlName="three_day_included_km">
                                  </div>
                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Included Hours</label>
                                    <input type="text" class="form-control" formControlName="three_day_included_hours">
                                  </div>

                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Rate per Additional KM</label>
                                    <input type="text" class="form-control" formControlName="three_day_add_km">
                                  </div>
                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Rate per Additional Hour</label>
                                    <input type="text" class="form-control" formControlName="three_day_add_hr">
                                  </div>
                                  <div class="col-md-4 mb-3">
                                    <label class="form-label">Driver Bata</label>
                                    <input type="text" class="form-control" formControlName="three_day_bata">
                                  </div>

                                </div>
                              </div>

                            </div>
                            <!-- *ngIf="propertyType == 'ACCOMODATION' || propertyType == 'BACK_WATERS'" -->
                            <!-- Pricing List -->

                            <!-- <div formArrayName="propertyPricing" class="card-body pb-1" *ngFor="let variant of getPricing(item.form); let vi = index"> -->
                            <form [formGroup]="pricingForm" class="mb-4">

                              <div *ngIf="propertyType != 'TRANSPORTATION'">

                                <div formArrayName="propertyPricing" class="card-body pb-1">

                                  <div class="row align-items-end"
                                    *ngFor="let pricingCtrl of getPropertyPricingControls(item.form); let pi = index"
                                    [formGroup]="pricingCtrl">
                                    <div class="col-lg-2 col-md-6 mb-3">
                                      <input class="form-control" formControlName="name" placeholder="Season Name" />
                                    </div>
                                    <div class="col-lg-3 col-md-6 mb-3">
                                      <input type="date" class="form-control" formControlName="startDate" />
                                    </div>
                                    <div class="col-lg-3 col-md-6 mb-3">
                                      <input type="date" class="form-control" formControlName="endDate" />
                                    </div>
                                    <div class="col-lg-2 col-md-6 mb-3">
                                      <input class="form-control" type="number" formControlName="rate"
                                        placeholder="Rate" />
                                    </div>
                                    <div class="col-lg-1 col-md-6 mb-3">
                                      <mat-slide-toggle formControlName="isActive" color="primary"></mat-slide-toggle>
                                    </div>
                                    <div class="col-lg-1 col-md-6 mb-3 d-flex align-items-end">

                                      <!-- <button type="button" class="btn btn-success btn-sm rounded-pill px-3"
                                    (click)="editPricing(variantIndex, pi)">
                                    Edit
                                  </button> -->
                                      <button type="button" class="btn btn-success btn-sm rounded-pill px-3"
                                        (click)="editPricing(variantIndex, pi)">
                                        Edit
                                      </button>
                                    </div>
                                  </div>
                                </div>

                                <div class="card-body pb-1">
                                  <div class="row align-items-end">
                                    <!-- Season Name -->
                                    <div class="col-lg-2 col-md-6 mb-3">
                                      <label class="form-label">Season Name</label>
                                      <input type="text" class="form-control" formControlName="name"
                                        placeholder="Season name" />
                                    </div>

                                    <!-- Start Date -->
                                    <div class="col-lg-3 col-md-6 mb-3">
                                      <label class="form-label">Start Date</label>
                                      <input type="date" class="form-control" formControlName="startDate" />
                                    </div>

                                    <!-- End Date -->
                                    <div class="col-lg-3 col-md-6 mb-3">
                                      <label class="form-label">End Date</label>
                                      <input type="date" class="form-control" formControlName="endDate" />
                                    </div>

                                    <!-- Rate -->
                                    <div class="col-lg-2 col-md-6 mb-3">
                                      <label class="form-label">Rate</label>
                                      <input type="number" class="form-control" formControlName="rate"
                                        placeholder="Rate" />
                                    </div>

                                    <!-- Active Toggle -->
                                    <div class="col-lg-1 col-md-6 mb-3">
                                      <label class="form-label d-block">Active</label>
                                      <mat-slide-toggle formControlName="isActive" color="primary"></mat-slide-toggle>
                                    </div>

                                    <!-- Save Button -->
                                    <div class="col-lg-1 col-md-6 mb-3 d-flex align-items-end">
                                      <button type="button" class="btn btn-success btn-sm rounded-pill px-3"
                                        (click)="addPricing(item.id)">
                                        Save
                                      </button>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </form>
                          </div>


                        </div>








                      </div>

                      <div class="alert alert-danger text-center mt-4" role="alert">
                        If you have made any changes, please click <strong>Update Type Button</strong> to save them.
                      </div>
                      <div class="d-flex align-items-center justify-content-center mb-2">
                        <button type="button" class="btn btn-success" (click)="updateVariant(variantIndex)">
                          Update Type </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            <div class="d-flex align-items-center justify-content-center mb-2" *ngIf="savedVariants?.length">
              <button type="button" class="btn btn-primary" (click)="varinatFormButtonHandle()">
                <i class="isax isax-add-circle me-1"></i> Add New Type
              </button>
            </div>
            <!-- Active Form -->





            <form [formGroup]="addVariantForm" (ngSubmit)="addVariant()"
              *ngIf="varinatFormButton || savedVariants?.length ==0">
              <div class="card shadow-none">
                <div class="card-header">
                  <h5 class="fs-18">Add Property Type</h5>
                </div>
                <div class="card-body">
                  <div class="row">
                    <div class="col-lg-4 col-md-6">
                      <!-- <label class="form-label">Name</label> -->
                      <label class="form-label" *ngIf="propertyType === 'BACK_WATERS'">Boat Cruise Name</label>
                      <label class="form-label" *ngIf="propertyType === 'TRANSPORTATION'">Vehicle Name</label>
                      <label class="form-label" *ngIf="propertyType === 'SPECIAL_EVENTS'">Event Name</label>

                      <input type="text" class="form-control" formControlName="name" />
                    </div>



                    <div class="col-lg-4 col-md-6">
                      <label class="form-label">Details</label>
                      <input type="text" class="form-control" formControlName="details" />
                    </div>

                    <div class="col-lg-4 col-md-6">
                      <label class="form-label">No of Units Available</label>
                      <input type="text" class="form-control" formControlName="total_units_available" />
                    </div>

                    <div class="col-md-4 mb-3" *ngIf="propertyType == 'SPECIAL_EVENTS'">
                      <label class="form-label">Standard
                        Rate
                      </label>
                      <input formControlName="rate" type="number" class="form-control" />
                    </div>




                    <!-- ************************* Backwater**************** -->

                    <div class="card-body pb-1" *ngIf="propertyType == 'BACK_WATERS'">
                      <div class="row">
                        <div class="col-lg-4 col-md-6">
                          <div class="mb-3">
                            <label class="form-label"> Number of Capacity </label>
                            <input type="text" class="form-control" formControlName="capacity" />
                          </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                          <div class="mb-3">
                            <label class="form-label">Number of Staff</label>
                            <input type="text" class="form-control" formControlName="staff" />
                          </div>
                        </div>

                        <div class="col-lg-4 col-md-6">
                          <div class="mb-3">
                            <label class="form-label"> Boat Material</label>
                            <input type="text" class="form-control" formControlName="boat_material" />
                          </div>
                        </div>




                      </div>
                    </div>
                    <!-- ************************* Backwater**************** -->


                    <!-- ************************* TRANSPORTATION**************** -->

                    <div class="card-body pb-1" *ngIf="propertyType === 'TRANSPORTATION'">
                      <div class="row">

                        <!-- 4. Vehicle Number -->
                        <div class="col-lg-4 col-md-6 mb-3">
                          <label class="form-label">Vehicle Number</label>
                          <input type="text" class="form-control" formControlName="vehicle_number" />
                        </div>

                        <!-- 3. Capacity -->
                        <div class="col-lg-4 col-md-6 mb-3">
                          <label class="form-label">Capacity</label>
                          <input type="text" class="form-control" formControlName="capacity_transport" />
                        </div>



                        <!-- 5. RC Number with Expiry -->
                        <div class="col-lg-12 col-md-12 mb-3">
                          <div class="row">
                            <div class="col-md-6">
                              <label class="form-label">Commercial Permit Number</label>
                              <input type="text" class="form-control" formControlName="permit_number" />
                            </div>
                            <div class="col-md-6">
                              <label class="form-label">Commercial Permit Expiry</label>
                              <input type="date" class="form-control" formControlName="permit_expiry" />
                            </div>
                          </div>
                        </div>

                        <!-- 5. RC Number with Expiry -->
                        <div class="col-lg-12 col-md-12 mb-3">
                          <div class="row">
                            <div class="col-md-6">
                              <label class="form-label">Fitness Certificate Number</label>
                              <input type="text" class="form-control" formControlName="fitness_number" />
                            </div>
                            <div class="col-md-6">
                              <label class="form-label">Fitness Certificate Expiry</label>
                              <input type="date" class="form-control" formControlName="fitness_expiry" />
                            </div>
                          </div>
                        </div>



                        <!-- 5. RC Number with Expiry -->
                        <div class="col-lg-12 col-md-12 mb-3">
                          <div class="row">
                            <div class="col-md-6">
                              <label class="form-label">RC Number</label>
                              <input type="text" class="form-control" formControlName="rc_number" />
                            </div>
                            <div class="col-md-6">
                              <label class="form-label">RC Expiry</label>
                              <input type="date" class="form-control" formControlName="rc_expiry" />
                            </div>
                          </div>
                        </div>

                        <!-- 6. PUC with Expiry -->
                        <div class="col-lg-12 col-md-12 mb-3">
                          <div class="row">
                            <div class="col-md-6">
                              <label class="form-label">PUC Number</label>
                              <input type="text" class="form-control" formControlName="puc_number" />
                            </div>
                            <div class="col-md-6">
                              <label class="form-label">PUC Expiry</label>
                              <input type="date" class="form-control" formControlName="puc_expiry" />
                            </div>
                          </div>
                        </div>



                        <!-- 8. Insurance Number with Expiry -->
                        <div class="col-lg-12 col-md-12 mb-3">
                          <div class="row">
                            <div class="col-md-6">
                              <label class="form-label">Insurance Number</label>
                              <input type="text" class="form-control" formControlName="insurance_number" />
                            </div>
                            <div class="col-md-6">
                              <label class="form-label">Insurance Expiry</label>
                              <input type="date" class="form-control" formControlName="insurance_expiry" />
                            </div>
                          </div>
                        </div>


                      </div>

                      <!-- RATE INPUT SECTION -->
                      <!-- TRANSPORTATION RATE INPUT SECTION -->



                    </div>




                    <!-- ************************* TRANSPORTATION**************** -->

                    <!-- ************************* ACCOMODATION**************** -->

                    <div class="card-body pb-1" *ngIf="propertyType == 'ACCOMODATION'">
                      <div class="row">
                        <!-- Number of Guests -->
                        <div class="col-lg-4 col-md-6">
                          <div class="mb-3">
                            <label class="form-label">Number of Guests</label>
                            <input type="number" class="form-control" formControlName="guest_count" />
                          </div>
                        </div>

                        <!-- Price -->
                        <!-- <div class="col-lg-4 col-md-6">
                        <div class="mb-3">
                          <label class="form-label">Price</label>
                          <input type="number" class="form-control" formControlName="price" />
                        </div>
                      </div> -->

                        <!-- Breakfast Available -->
                        <div class="col-lg-4 col-md-6">
                          <div class="mb-3">
                            <label class="form-label">Breakfast Available</label>
                            <select class="form-select" formControlName="breakfast_available">
                              <option value="">Select</option>
                              <option value="yes">Yes</option>
                              <option value="no">No</option>
                            </select>
                          </div>
                        </div>

                        <!-- Parking Available -->
                        <div class="col-lg-4 col-md-6">
                          <div class="mb-3">
                            <label class="form-label">Parking Available</label>
                            <select class="form-select" formControlName="parking_available">
                              <option value="">Select</option>
                              <option value="yes">Yes</option>
                              <option value="no">No</option>
                            </select>
                          </div>
                        </div>

                        <!-- Nearby Attractions -->
                        <!-- <div class="col-lg-8 col-md-12">
                          <div class="mb-3">
                            <label class="form-label">List of Nearby Attractions</label>
                            <textarea class="form-control" rows="2" formControlName="nearby_attractions"
                              placeholder="e.g. Museum, Beach, Park"></textarea>
                          </div>
                        </div> -->

                        <!-- Bed Size -->
                        <div class="col-lg-4 col-md-6">
                          <div class="mb-3">
                            <label class="form-label">Bed Size</label>
                            <input type="text" class="form-control" formControlName="bed_size"
                              placeholder="e.g. King, Queen" />
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- ************************* ACCOMODATION**************** -->


                    <!-- ************************* SPECIAL_EVENTS**************** -->


                    <div class="card-body pb-1" *ngIf="propertyType == 'SPECIAL_EVENTS'">
                      <div class="row">
                        <!-- Number of Guests -->
                        <div class="col-lg-4 col-md-6">
                          <div class="mb-3">
                            <label class="form-label"> Number of Capacity </label>
                            <input type="text" class="form-control" formControlName="capacity" />
                          </div>
                        </div>

                        <!-- Price -->
                        <div class="col-lg-4 col-md-6">
                          <div class="mb-3">
                            <label class="form-label">Date</label>
                            <input type="date" class="form-control" formControlName="event_date" />
                          </div>
                        </div>


                        <div class="col-lg-4 col-md-6">
                          <div class="mb-3">
                            <label class="form-label">Time</label>
                            <input type="time" class="form-control" formControlName="event_time" />
                          </div>
                        </div>








                      </div>
                    </div>


                    <div class="col-lg-4 col-md-6 mt-2"
                      *ngIf="propertyType !== 'ACCOMODATION' && propertyType !== 'SPECIAL_EVENTS'">
                      <label class="form-label">Emergency Contact Number</label>
                      <input type="text" class="form-control" formControlName="emergency_number" />
                    </div>

                    <div class="col-lg-4 col-md-6" *ngIf="propertyType == '!SPECIAL_EVENTS'">
                      <label class="form-label">Child Count</label>
                      <input type="number" class="form-control" formControlName="child_count" />
                    </div>


                    <!-- ************************* SPECIAL_EVENTS**************** -->



                    <div formArrayName="customizations" class="mt-3">
                      <div *ngFor="let item of customizations.controls; let i = index" [formGroupName]="i"
                        class="row align-items-end mb-3">



                        <!-- Customization Key -->
                        <div class="col-lg-3 col-md-3 mt-3">
                          <label class="form-label">Add More Fields</label>

                          <mat-select class="custom-mat-select select" placeholder="Select Option" formControlName="key"
                            (selectionChange)="onCustomizationKeyChange(i)"
                            [disabled]="i !== customizations.length - 1">
                            <mat-option *ngFor="let option of getAvailableOptions(i)" [value]="option.name">
                              <!-- <img [src]="option.icon_url" width="20" height="20" class="me-2" alt="icon" /> -->
                              {{ option.name }}
                            </mat-option>
                          </mat-select>
                        </div>

                        <!-- Customization Value -->
                        <div class="col-lg-4 col-md-6">
                          <label class="form-label">Value</label>
                          <input type="text" class="form-control" formControlName="value"
                            placeholder="Enter Custom Value" [disabled]="i !== customizations.length - 1" />
                        </div>

                        <!-- Delete Button -->
                        <div class="col-lg-1 col-md-3 d-flex align-items-end">
                          <button type="button" class="btn btn-danger ms-2" (click)="removeCustomization(i)"
                            *ngIf="customizations.length > 1">
                            <i class="isax isax-trash"></i>
                          </button>
                        </div>

                        <!-- Add Button Only for Last Row and When Both Fields Filled -->
                        <div class="col-lg-3 col-md-3 d-flex align-items-end mt-2" *ngIf="
                        i === customizations.length - 1 &&
                        canAddCustomization(i)
                      ">
                          <button type="button" class="btn btn-success btn-sm" (click)="addCustomization()">
                            <i class="isax isax-add-circle me-1"></i> save
                          </button>
                        </div>
                      </div>
                    </div>

                  </div>

                  <!-- Outer Single Card -->
                  <div class="card shadow-none mb-3">
                    <div class="card-header">
                      <div class="d-flex align-items-center justify-content-between">
                        <h5 class="fs-18">Amentities</h5>
                      </div>
                    </div>

                    <div class="card-body pb-1" formArrayName="customizationBlocks">
                      <!-- Repeatable Group Blocks -->
                      <div *ngFor="let block of customizationBlocks.controls; let i = index" [formGroupName]="i"
                        class="mb-4">
                        <!-- Group Dropdown -->
                        <div class="row">
                          <div class="col-lg-2 col-md-3 mb-3">

                            <mat-select class="custom-mat-select select" placeholder="Select Group"
                              formControlName="mainOptions" [disabled]="readOnlyBlocks[i]"
                              (selectionChange)="onGroupChange($event.value, i)">
                              <mat-option value="">Select</mat-option>
                              <mat-option *ngFor="let option of groupOptions" [value]="option.value">
                                {{ option.label }}
                              </mat-option>
                            </mat-select>
                          </div>
                        </div>

                        <!-- Checkbox Grid -->
                        <div class="row">
                          <div class="col-lg-12 col-md-6">
                            <div class="mb-3">
                              <div class="row">
                                <div class="col-lg-4 col-md-6 mb-2"
                                  *ngFor="let option of customizedDataArray[i]; let idx = index">
                                  <div class="form-check d-flex align-items-center ps-0">
                                    <!-- <input class="form-check-input ms-0 mt-0" type="checkbox"
                                    [id]="'custom-opt-' + i + '-' + idx"
                                    (change)="onCheckboxChange($event, option, i)" /> -->
                                    <input class="form-check-input ms-0 mt-0" type="checkbox"
                                      [disabled]="readOnlyBlocks[i]" [id]="'custom-opt-' + i + '-' + idx"
                                      (change)="onCheckboxChange($event, option, i)" />
                                    <label class="form-check-label ms-2" [for]="'custom-opt-' + i + '-' + idx">
                                      <img *ngIf="option.icon_url" [src]="option.icon_url" width="20" height="20"
                                        class="me-2" />
                                      {{ option.name }}
                                    </label>
                                  </div>
                                </div>
                              </div>
                            </div>



                            <!-- Add Button -->
                            <div class="col-lg-3 col-md-3 d-flex align-items-end mt-2"
                              *ngIf="i === customizationBlocks.length - 1">
                              <button type="button" class="btn btn-success btn-sm" (click)="onAdd(i)">
                                <i class="isax isax-add-circle me-1"></i> Add More
                              </button>
                            </div>




                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="card shadow-none mt-3"
                    *ngIf="propertyType !== 'ACCOMODATION' && propertyType !== 'SPECIAL_EVENTS'">
                    <div class="card-header">
                      <h5 class="fs-18">Add Pricing</h5>
                    </div>
                    <div class="card-body">
                      <div class="row">




                        <div class="col-md-4 mb-3">
                          <label class="form-label"> {{ propertyType === 'TRANSPORTATION' ? 'Minimum Rate' : 'Standard
                            Rate'
                            }}
                          </label>
                          <input formControlName="rate" type="number" class="form-control" />
                        </div>

                        <div class="col-lg-4 col-md-6" *ngIf="propertyType == 'BACK_WATERS'">
                          <label class="form-label">Extra Hour Rate</label>
                          <input type="text" class="form-control" formControlName="extra_hour_rate" placeholder="" />
                        </div>

                        <div class="col-lg-4 col-md-6" *ngIf="propertyType == 'BACK_WATERS'">
                          <label class="form-label">Extra Person Rate</label>
                          <input type="text" class="form-control" formControlName="extra_person_rate" placeholder="" />
                        </div>
                        <div class="col-lg-4 col-md-6" *ngIf="propertyType == 'BACK_WATERS'">
                          <label class="form-label">Breakfast Rate</label>
                          <input type="text" class="form-control" formControlName="breakfast_rate"
                            placeholder="type amount or free" />
                        </div>
                        <div class="col-lg-4 col-md-6" *ngIf="propertyType == 'BACK_WATERS'">
                          <label class="form-label">Lunch Rate</label>
                          <input type="text" class="form-control" formControlName="lunch_rate"
                            placeholder="type amount or free" />
                        </div>
                        <div class="col-lg-4 col-md-6" *ngIf="propertyType == 'BACK_WATERS'">
                          <label class="form-label">Dinner Rate</label>
                          <input type="text" class="form-control" formControlName="dinner_rate"
                            placeholder="type amount or free" />
                        </div>

                        <div class="col-lg-4 col-md-6 mt-2" *ngIf="propertyType == 'BACK_WATERS'">
                          <label class="form-label">Extra Bed Rate</label>
                          <input type="number" class="form-control" formControlName="rate_for_extra_bed"
                            placeholder="Extra Bed rate" />
                        </div>


                        <div class="col-lg-4 col-md-6" *ngIf="propertyType == 'TRANSPORTATION'">
                          <label class="form-label">KM for Minimum Rate</label>
                          <input type="text" class="form-control" formControlName="km_min_rate"
                            placeholder="Kilometer for minimum rate" />
                        </div>

                        <div class="col-lg-4 col-md-6" *ngIf="propertyType == 'TRANSPORTATION'">
                          <label class="form-label">Addition Rate / KM</label>
                          <input type="text" class="form-control" formControlName="additional_rate_km" />
                        </div>

                        <div class="col-lg-4 col-md-6" *ngIf="propertyType == 'TRANSPORTATION'">
                          <label class="form-label">Waiting Charge</label>
                          <input type="text" class="form-control" formControlName="waiting_rate" />
                        </div>

                        <div class="row" *ngIf="propertyType == 'TRANSPORTATION'">

                          <!-- ONE - DAY -->
                          <div class="col-12 mb-4 mt-2">
                            <label class="form-label fw-bold">ONE - DAY</label>
                            <div class="row">

                              <!-- Minimum Rate Group -->
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Minimum Rate (₹)</label>
                                <input type="text" class="form-control" formControlName="one_day_min_rate">
                              </div>
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Included KM</label>
                                <input type="text" class="form-control" formControlName="one_day_included_km">
                              </div>
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Included Hours</label>
                                <input type="text" class="form-control" formControlName="one_day_included_hours">
                              </div>

                              <!-- Additional Charges -->
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Rate per Additional KM</label>
                                <input type="text" class="form-control" formControlName="one_day_add_km">
                              </div>
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Rate per Additional Hour</label>
                                <input type="text" class="form-control" formControlName="one_day_add_hr">
                              </div>
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Driver Bata</label>
                                <input type="text" class="form-control" formControlName="one_day_bata">
                              </div>

                            </div>
                          </div>

                          <!-- TWO - DAYS -->
                          <div class="col-12 mb-4">
                            <label class="form-label fw-bold">TWO - DAYS</label>
                            <div class="row">

                              <div class="col-md-4 mb-3">
                                <label class="form-label">Minimum Rate (₹)</label>
                                <input type="text" class="form-control" formControlName="two_day_min_rate">
                              </div>
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Included KM</label>
                                <input type="text" class="form-control" formControlName="two_day_included_km">
                              </div>
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Included Hours</label>
                                <input type="text" class="form-control" formControlName="two_day_included_hours">
                              </div>

                              <div class="col-md-4 mb-3">
                                <label class="form-label">Rate per Additional KM</label>
                                <input type="text" class="form-control" formControlName="two_day_add_km">
                              </div>
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Rate per Additional Hour</label>
                                <input type="text" class="form-control" formControlName="two_day_add_hr">
                              </div>
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Driver Bata</label>
                                <input type="text" class="form-control" formControlName="two_day_bata">
                              </div>

                            </div>
                          </div>

                          <!-- THREE - DAYS -->
                          <div class="col-12 mb-4">
                            <label class="form-label fw-bold">THREE - DAYS</label>
                            <div class="row">

                              <div class="col-md-4 mb-3">
                                <label class="form-label">Minimum Rate (₹)</label>
                                <input type="text" class="form-control" formControlName="three_day_min_rate">
                              </div>
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Included KM</label>
                                <input type="text" class="form-control" formControlName="three_day_included_km">
                              </div>
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Included Hours</label>
                                <input type="text" class="form-control" formControlName="three_day_included_hours">
                              </div>

                              <div class="col-md-4 mb-3">
                                <label class="form-label">Rate per Additional KM</label>
                                <input type="text" class="form-control" formControlName="three_day_add_km">
                              </div>
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Rate per Additional Hour</label>
                                <input type="text" class="form-control" formControlName="three_day_add_hr">
                              </div>
                              <div class="col-md-4 mb-3">
                                <label class="form-label">Driver Bata</label>
                                <input type="text" class="form-control" formControlName="three_day_bata">
                              </div>

                            </div>
                          </div>

                        </div>
                      </div>
                    </div>
                  </div>


                  <div class="d-flex align-items-center justify-content-center">
                    <button type="submit" class="btn btn-primary">
                      Save
                    </button>
                  </div>








                </div>
              </div>
            </form>


          </div>

          <!-- /Variant  -->

        </div>
      </div>
    </div>
  </div>


</div>